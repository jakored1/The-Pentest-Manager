

function ShellCommand({commandInfo}) {

    const ansiToColor = (text) => {
        // Gets text containing ansi color codes and removes them
        // In the future I would like to have it actually color the text,
        // but this is too much work for now as I couldn't find a library that does this
        let noAnsiText = text
        
        // Found this regex here: https://stackoverflow.com/questions/25245716/remove-all-ansi-colors-styles-from-strings
        // noAnsiText = noAnsiText.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g, '')
        
        // The above regex didn't work for a certain output I got so I do this as well
        // Replaces stuff like: 
        // [32m[+][0m URL      => [+] URL
        // [32m[+][0m Headers  => [+] Headers
        noAnsiText = noAnsiText.replace(/\[\d*?m/g, '')  
        return noAnsiText
    }

    return (
        <div style={{ backgroundColor: 'rgb(0, 0, 0, 0.9)' }}>
            <p style={{whiteSpace: "pre-wrap", wordWrap: 'break-word', color: 'white', padding: '12px' }}>
                {ansiToColor(commandInfo.command_output)}
            </p>
        </div>
    )
}

export default ShellCommand;
